# Repository Guidelines

## プロジェクト構成とモジュール配置
「betrayer2」はUnity 6000.2.6f1をターゲットにした戦略シミュレーションです。主なコードは`Assets/Main/`に集約され、`System/`がゲームコア(`GameCore.cs`)とAI・データ構造をまとめ、`Actions/`が個人・戦略アクションを定義し、`Battle/`が戦闘処理を担当します。UI要素はRosalinaの自動生成アクセッサと連携する`UI/`に置かれ、マップ関連は`Tiles/`にあります。タイトル画面は`Assets/Title/`、エディタ拡張は`Assets/Development/Editor/`、外部アセットとフォントは`Assets/External/`と`Assets/Resources/`に整理されています。`Assets/Rosalina/AutoGenerated/`の生成物や`@参考ソース_betrayer1/`の資料は読取専用として扱ってください。

## アーキテクチャ概要
- `GameCore`: 日単位の進行を制御するシングルトンで、世界データ、UI、AI、アクションを統合管理します。
- `WorldData`と`GameDate`: 経済・外交・時間イベントを保持し、収入や忠誠度の自動更新を行います。
- `ActionsBase<T>`と`PersonalActions`・`StrategyActions`: コストや実行条件を共通化したアクションシステムです。
- `MainUI`と`TitleSceneUI`: Rosalinaで生成されたフィールドを介してUI Toolkit要素にアクセスします。
- `Battle`/`BattleManager`: 兵士の回復や連戦ペナルティを含む戦闘処理を担当します。

## ビルド・テスト・開発コマンド
ビルド・テスト等の操作とコマンドは人間の開発者が実行します。AIエージェントは実行しません。

## コーディング規約と命名
C#コードは4スペースインデントとAllmanスタイルの波括弧を用い、クラスとメソッドはPascalCase、フィールドはcamelCaseで統一します。インスペクターに露出させたい非public変数は`[SerializeField] private`を基本とします。UI操作はRosalina生成アクセッサ経由で行い、`.Q()`検索は避けてください。Unityの`.meta`ファイルはエディタが自動生成するので、新規作成や直接編集は行わないでください。改行コードはCRLFで統一してください。

## テスト指針
テストコードは不要です。

## コミットとPull Requestガイドライン
コミットメッセージは既存履歴と同様に簡潔な命令形の日本語を用い、例として「外交一覧UI 更新」「AI親善確率調整」があります。機能変更・バランス調整・アセット更新は別コミットに分割してください。Pull Requestでは変更内容、目的、確認方法を冒頭に整理し、UI変更はスクリーンショットやGIFを添付します。長期シミュレーションに影響する場合は検証手順と必要なセーブデータやログの保存場所を明記してください。
